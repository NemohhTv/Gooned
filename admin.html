<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GOONED â€” Admin</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <a href="index.html" class="logo-link"><img src="logo.svg" class="logo" alt="GOONED"/></a>
    <a class="admin-link" href="admin.html">Admin</a>
  </header>

  <main class="app">
    <!-- Login/Create Admin Panel -->
    <section id="loginPanel" class="card" style="display:none;">
      <h2>Admin Login</h2>
      <p id="loginHelp" class="muted"></p>
      <form id="loginForm" class="col" onsubmit="return false;">
        <label class="row"><span>Password</span>
          <input type="password" id="adminPassword" placeholder="Enter password" required />
        </label>
        <label class="row chk"><input type="checkbox" id="rememberMe" /> Remember me</label>
        <div class="row">
          <button id="loginBtn">Login</button>
          <button id="createAdminBtn" type="button">Create Admin</button>
        </div>
        <div id="urlValidation" class="help" style="margin:.5em 0; font-size:.9em;"></div>
        </form>
    </section>

    <!-- Admin App -->
    <section id="adminApp" style="display:none;">
      <!-- Auth bar -->
      <section class="card" id="authBar">
        <div class="row" style="justify-content:space-between; align-items:center;">
          <h2 style="margin:0;">Admin Panel</h2>
          <div class="row" style="gap:8px;">
            <button id="changePassBtn" type="button">Change Password</button>
            <button id="logoutBtn" type="button">Logout</button>
          </div>
        </div>
      </section>

      <!-- Add/Manage Admin Entries -->
      <section class="card" id="adminCard">
        <h3>Add New Submission</h3>

        <div id="bulkBar" class="bulkbar" style="display:none">
          <div class="row" style="justify-content:space-between;width:100%">
            <div class="row">
              <label class="chk"><input type="checkbox" id="selectAllAdmin"> Select all</label>
              <button id="clearSelBtn" type="button">Clear</button>
            </div>
            <div class="row">
              <button id="bulkListBtn" type="button">List</button>
              <button id="bulkUnlistBtn" type="button">Unlist</button>
              <button id="bulkDeleteBtn" type="button">Delete</button>
            </div>
          </div>
        </div>

        <h3>Add Imgur URL</h3>
        <form id="addForm" class="row" onsubmit="return false;">
          <textarea id="imageUrls" placeholder="Paste Imgur direct links (one per line). Example: https://i.imgur.com/abcd123.jpg" rows="6" style="width:100%"></textarea>
          <input type="text" id="answerText" placeholder="Answer/caption (applies to all, optional)" />
          <button type="submit">Add</button>
          <div id="urlValidation" class="help" style="margin:.5em 0; font-size:.9em;"></div>
        </form>

        
        </div>

        <div class="row" style="gap:8px; margin-top:8px;">
          <button id="exportBtn" type="button">Export Admin Entries</button>
          <button id="clearBtn" type="button">Clear All</button>
        </div>

        <h3>Admin Entries</h3>
        <div id="adminList" class="admin-list"></div>
      </section>

      <!-- Current Rotation -->
      <section class="card" id="galleryWrap">
        <h3>Current Rotation (Built-in + Admin)</h3>
        <div id="galleryList" class="gallery-list"></div>
      </section>

      <!-- User submissions (moderation) -->
      <section class="card" id="submissions">
        <h3>User Submissions (Pending Approval)</h3>
        <div id="submissionsList" class="admin-list"></div>
      </section>
    </section>
  </main>

  <script>
    // Admin starts with empty builtin list; all rotation content is admin-approved or admin-added
    window.GOONED_BUILTIN = [];
  </script>
  <script src="auth.js"></script>
  <script src="admin_gate.js"></script>
  <script src="admin.js"></script>
</body>
</html>
